(ª(z,a){ªt(q){g.reset().setFontAlign(Ó,Ó);¬h=Bangle.appRect,f=h.y,b=h.w,c=g.findFont(a.title "",{w:b-Ô,wrap:Ô,max:Ô});c.text?(g.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(Ó,f,b-Ô,f+Ô+c.h).drawString(c.text,b/Ô,f+Ô+c.h/Ô),f–c.h+Ô):f–Ô;¬l=Ó|Ñ0123233[k.length],v=Math.ceil(k.length/l),w=(b-Ô)/l,n=a.buttonHeight (Ô<v a.img?Ô(:Ô2);c=h.y2-(f+v*n);£(a.img){¬r=g.imageMetrics(a.img);g.drawImage(a.img,(b-r.width)/Ô,f+Ô);c—r.height;f–r.height}r=g.findFont(z,{w:b-Ô,h:c,wrap:Ô,trim:Ô,min:Ô});g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(r.text,b/Ô,f+c/Ô);x=[];k.forEach((y,u)¢{¬d=u%l*w+Ô,e=h.y2-(v-(Ó|u/l))*n+Ô,p=w-Ô,m=n-Ô;m=[d+Ô,e,d+p-Ô,e,d+p,e+Ô,d+p,e+m-Ô,d+p-Ô,e+m,d+Ô,e+m,d,e+m-Ô,d,e+Ô,d+Ô,e];x.push({x1:d-Ô,x2:d+w-Ô,y1:e,y2:e+n});y=g.findFont(y,{w:p-Ô,h:n-Ô,wrap:Ô});g.setColor(u‹q?g.theme.bgH:g.theme.bg2).fillPoly(m).setColor(u‹q?g.theme.fgH:g.theme.fg2).drawPoly(m).drawString(y.text,d+p/Ô,e+Ô+n/Ô)});Bangle.setLCDPower(Ô)}a (a={});a.buttons (a.buttons={Yes:!Ó,No:!Ô});¬k=Object.keys(a.buttons);£(Ô<k.length)°Error(Ñ
>6 buttons);¬x;g.reset().clearRect(Bangle.appRect);£(!z)«Bangle.setUI(),Promise.resolve();t();«¸Promise(q¢{¬h={mode:Ñcustom,remove:a.remove,redraw:t,back:a.back,touch:(f,b)¢{x.forEach((c,l)¢{b.x‘c.x1žb.xŽc.x2žb.y‘c.y1žb.yŽc.y2ž!b.hitž(b.hit=!Ó,t(l),g.flip(),E.showPrompt(),q(a.buttons[k[l]]))})}};ÔŒk.length a.back (h.btn=()¢{t(Ó);g.flip();E.showPrompt();q(a.buttons[k[Ó]])});Bangle.setUI(h)})})