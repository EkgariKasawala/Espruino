(ª(w,b){ªq(m){g.reset().setFontAlign(0,0);¬h=Bangle.appRect,f=h.y,c=h.w,a=g.findFont(b.title "",{w:c-2,wrap:1,max:24});a.textžg.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(0,f,c-1,f+4+a.h).drawString(a.text,c/2,f+4+a.h/2);f–a.h+4;a=Math.min(2,l.length);¬n=Math.ceil(l.length/a),x=c/a;a=h.y2-(f+40*n);£(b.img){¬p=g.imageMetrics(b.img);g.drawImage(b.img,(c-p.width)/2,f+6);a—p.height;f–p.height}p=g.findFont(w,{w:c-2,h:a,wrap:1,trim:1,min:16});g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(p.text,c/2,f+a/2);t=[];l.forEach((u,r)¢{¬d=(r&1)*x+2,e=h.y2-40*(n-(r’1))-2,k=x-5,v=[d+4,e,d+k-4,e,d+k,e+4,d+k,e+40-4,d+k-4,e+40,d+4,e+40,d,e+40-4,d,e+4,d+4,e];t.push({x1:d-2,x2:d+k,y1:e,y2:e+40+2,poly:v});u=g.findFont(u,{w:k-4,h:36,wrap:1});g.setColor(r‹m?g.theme.bgH:g.theme.bg2).fillPoly(v).setColor(r‹m?g.theme.fgH:g.theme.fg2).drawPoly(v).drawString(u.text,d+k/2,e+20)});Bangle.setLCDPower(1)}b (b={});b.buttons (b.buttons={Yes:!0,No:!1});¬l=Object.keys(b.buttons),t;g.reset().clearRect(Bangle.appRect);£(!w)«Bangle.setUI(),Promise.resolve();q();«¸Promise(m¢{¬h={mode:Ñcustom,remove:b.remove,redraw:q,back:b.back,touch:(f,c)¢{t.forEach((a,n)¢{c.x>a.x1žc.x<a.x2žc.y>a.y1žc.y<a.y2ž(q(n),g.flip(),E.showPrompt(),m(b.buttons[l[n]]))})}};1Œl.length b.back (h.btn=()¢{q(0);g.flip();E.showPrompt();m(b.buttons[l[0]])});Bangle.setUI(h)})})